<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
  <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
    <!DOCTYPE html>
    <html>

    <head>
      <meta charset="UTF-8">
      <title>Insert title here</title>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
      <style>
        /* 로그인&회원가입 시작*/
        /* 로그인버튼 임시 위치지정 */
        #loginBtn {
          margin-top: 200px;
          margin-left: 200px;
        }

        .modal-first-body {
          text-align: center;
        }

        #exampleModalToggleLabel {
          width: 100%;
          height: 50px;
          text-align: center;
          font-size: 28px;
        }

        /* 아이디&비밀번호 input */
        .loginInput {
          width: 80%;
          height: 40px;
          margin-top: 10px;
          border: 1px solid rgb(185, 185, 185);
          padding-left: 15px;
          border-radius: 5px;
        }

        .loginInputBox {
          text-align: center;
        }

        .loginBtns {
          text-align: center;
        }

        .loginBtns button {
          width: 39%;
          height: 40px;
          margin-top: 10px;
          border: none;
          border-radius: 7px;
        }

        .loginBtns button:first-child {
          background-color: #20B2AA;
          color: whitesmoke;
        }

        .loginBtns button:last-child {
          background-color: #20B2AA;
          color: rgb(249, 251, 255);
        }

        .loginBtns button:hover {
          opacity: 0.9;
        }

        .loginForm {
          margin-bottom: 5px;
        }

        /* 로그인 인풋 끝 */
        /* 회원가입 시작 */
        #signupModalBtn {
          width: 80%;
          background: linear-gradient(45deg, cornflowerblue, rgb(121, 187, 241));
          border: none;
          height: 40px;
          margin-bottom:15px;
        }

        #signupModalBtn:hover {
          opacity: 0.9;
        }

        /* 회원가입창 로고부분 */
        #exampleModalToggleLabel2 {
          width: 100%;
          height: 50px;
          text-align: center;
          font-size: 28px;
        }

        /* 회원가입창 전체 중앙정렬 */
        .modal-signupBody {
          width: 80%;
          text-align: center;
          margin: auto;
        }

        /* 중복확인시 나타나는 글자 */
        .signupInputConfirm {
          font-size: 12px;
          height:20px;
          color: cornflowerblue;
        }

        .emailIdConfirm {
          text-align: left;
        }

        .nickNameConfirm {
          text-align: left;
        }

        .signupBoxs {
          text-align: left;
        }

        .signupEmailInput,
        .signupNickNameInput {
          width: 70%;
          padding-left: 6px;
          margin-right: 20px;
          height: 36px;
          border-radius: 4px;
          border: 1px solid gray;
        }

        .signupCheckBtn {
          width: 76px;
          height: 36px;
          padding: 0;
          font-size: 14px;
          border: 1px solid gray;
          border-radius: 5px;
          background-color: white;
          color: rgb(63, 63, 63);
        }

        .signupCheckBtn:hover {
          background-color: rgb(250, 250, 250);
        }

        /* 이름, 비밀번호 */
        .signupLongInput {
          width: 96%;
          margin-bottom: 15px;
          border: 1px solid gray;
          border-radius: 4px;
          padding-left: 6px;
          height: 36px;
        }

        /* 휴대폰 입력란 */
        .phoneInput{
          width:22%;
          height:36px;
          padding-left:6px;
        }
        .phoneInput:first-child{
          width:15%;
        }
        #phoneCheckBtn{
          margin-left:24px;
        }
        /* 회원가입Go버튼 */
        .signupGoBtn {
          width: 96%;
          height: 40px;
          border: none;
          border-radius: 6px;
          background: linear-gradient(45deg, cornflowerblue, rgb(121, 187, 241));
          color: white;
        }

        .signupGoBtn:hover {
          opacity: 0.9;
        }

        .signupBack {
          background-color: #20B2AA;
          border: none;
          height: 30px;
          width: 70px;
          padding: 0;
          font-size: 13px;
        }

        #kakaoLogin:hover {
          opacity: 0.85;
          cursor: pointer;
        }
      </style>
    </head>

    <body>
      <!-- 로그인&회원가입모달창 -->
      <div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel"
        tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalToggleLabel">TripMate(로고가 올듯)</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body modal-first-body">
              <form action=# method="post" class="loginForm">
                <div class="loginInputBox">
                  <input type="text" id="inputID" class="loginInput" placeholder="이메일 주소" required><br>
                  <input type="password" id="inputPW" class="loginInput" placeholder="비밀번호" required>
                </div>
                <div class="loginBtns">
                  <button>로그인</button>
                  <button type="button" id="pwFind">PW찾기</button>
                </div>
              </form>
              <button type="button" id="signupModalBtn" class="btn btn-primary" data-bs-target="#exampleModalToggle2"
                data-bs-toggle="modal">회원가입</button><br>
              <img src="/images/kakao_login.png" id="kakaoLogin">
            </div>
          </div>
        </div>
      </div>
      <div class="modal fade" id="exampleModalToggle2" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2"
        tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content modal-signup-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalToggleLabel2">회원가입</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body modal-signupBody">
              <form action="#" method="post">
                <div class="signupBoxs">
                  <input type="text" placeholder="이메일 주소" id="signupEmail" class="signupEmailInput" name="email" required><button type="button"
                    class="signupCheckBtn" id="signupEmailCheckBtn">중복확인</button>
                  <div class="emailConfirm signupInputConfirm"></div>
                </div>
                <div class="signupBoxs">
                  <input type="text" placeholder="닉네임" class="signupNickNameInput" name="nick" required><button type="button"
                    class="signupCheckBtn">중복확인</button>
                  <div class="nickNameConfirm signupInputConfirm">테스트텍스트</div>
                </div>
                <div class="signupBoxs">
                  <input type="text" maxlength="3" placeholder="010" class="phoneInput" name="phone1" required> - 
                  <input type="text" maxlength="4" placeholder="1234" class="phoneInput" name="phone2" required> - 
                  <input type="text" maxlength="4" placeholder="5678" class="phoneInput" name="phone3" required><button type="button"
                  class="signupCheckBtn" id="phoneCheckBtn">인증?</button>
                  <div class="emailIdConfirm signupInputConfirm">테스트텍스트</div>
                  <input type="text" name="phone">
                </div>
                <div class="signupBoxs">
                  <!-- 추후 password로 변경 -->
                  <input type="text" placeholder="비밀번호" class="signupLongInput" required>
                </div>
                <div class="signupBoxs">
                  <input type="text" placeholder="비밀번호 확인" class="signupLongInput" required>
                </div>
                <div class="signupBoxs">
                  <button class="signupGoBtn">회원가입</button>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button class="btn btn-primary signupBack" data-bs-target="#exampleModalToggle"
                data-bs-toggle="modal">돌아가기</button>
            </div>
          </div>
        </div>
      </div>
      <!-- 로그인&회원가입 모달창 끝 -->
      <!-- 로그인&회원가입버튼 -->
      <a class="btn btn-primary" id="loginBtn" data-bs-toggle="modal" href="#exampleModalToggle"
        role="button">로그인버튼입니다.</a>


      <script>
        document.querySelector("#signupEmailCheckBtn").addEventListener("click", () => {
          let emailRegex = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;
          let signupEmailValue = document.querySelector("#signupEmail").value
          if(emailRegex.test(signupEmailValue)){
            $.ajax({
              url:"/member/emailCheck",
              data: signupEmailValue
            }).done(function(res){
              if(res == "1"){
                document.querySelector(".emailConfirm").style.color = "red";
                document.querySelector(".emailConfirm").innerHTML="사용중인 이메일입니다.";
              } else {
                document.querySelector(".emailConfirm").innerHTML="사용 가능한 이메일입니다.";
              }
            })
          } else {
            document.querySelector(".emailConfirm").style.color = "red";
            document.querySelector(".emailConfirm").innerHTML="이메일 양식을 확인해주세요.";
          }
        })






        document.querySelector("#pwFind").addEventListener("click", () => {
          window.open()
        })
      </script>

    </body>

    </html>